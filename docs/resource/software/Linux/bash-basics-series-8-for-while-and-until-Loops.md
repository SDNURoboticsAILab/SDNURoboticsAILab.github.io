---
comments: true
---

Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #8ï¼šForã€While å’Œ Until å¾ªç¯
======

> åœ¨ Bash åŸºç¡€çŸ¥è¯†ç³»åˆ—çš„å€’æ•°ç¬¬äºŒç« èŠ‚ï¼Œå­¦ä¹  `for`ã€`while` å’Œ `until` å¾ªç¯ã€‚

å¾ªç¯æ˜¯ä»»ä½•ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½ã€‚å¦‚æœä½ è¿˜ä¸çŸ¥é“ï¼Œå¾ªç¯å…¶å®æ˜¯ä¸€ç§æ ¹æ®æŸäº›æ¡ä»¶é‡å¤ä»£ç çš„æ–¹å¼ã€‚

ä¾‹å¦‚ï¼Œæƒ³è±¡ä¸€ä¸‹ä½ éœ€è¦æ‰“å°ä» 1 åˆ° 10 çš„æ•°å­—ã€‚ä½ å¯ä»¥ä½¿ç”¨ `echo` å‘½ä»¤å†™åæ¬¡ï¼Œä½†é‚£å¤ªåŸå§‹äº†ã€‚ä½ ä½¿ç”¨ä¸€ä¸ªå¾ªç¯ï¼Œåœ¨ 3 åˆ° 4 è¡Œä»£ç å†…ï¼Œå°±èƒ½å®Œæˆã€‚

è¿™æ˜¯æˆ‘èƒ½æƒ³åˆ°çš„æœ€ç®€å•çš„ä¾‹å­ã€‚æˆ‘å°†åœ¨è®¨è®º Bash å¾ªç¯æ—¶ï¼Œåˆ†äº«ä¸€äº›å®é™…æœ‰ç”¨çš„ä¾‹å­ã€‚

åœ¨ Bash ä¸­æœ‰ä¸‰ç§ç±»å‹çš„å¾ªç¯ï¼š

  * `for`
  * `while`
  * `until`

æˆ‘å°†åœ¨æ•™ç¨‹ä¸­å±•ç¤ºæ‰€æœ‰ä¸‰ç§ç±»å‹çš„å¾ªç¯ã€‚è®©æˆ‘ä»¬ä»æœ€å¸¸è§çš„ä¸€ç§å¼€å§‹ã€‚

## Bash ä¸­çš„ For å¾ªç¯

ä»¥ä¸‹æ˜¯ Bash ä¸­çš„ `for` å¾ªç¯è¯­æ³•ï¼š

```Bash
for arg in LIST; do
    commands
done
```

è¿™é‡Œçš„ `LIST` å¯èƒ½æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨ã€‚[æ‹¬å·æ‰©å±•](https://linuxhandbook.com/brace-expansion/?ref=itsfoss.com) ä¹Ÿæ˜¯è¿›è¡Œå¾ªç¯çš„å¸¸ç”¨æ‰‹æ®µã€‚

è€ƒè™‘ä¸€ä¸‹æˆ‘åœ¨å¼€å§‹æåˆ°çš„æœ€ç®€å•çš„åœºæ™¯ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ `for` å¾ªç¯æ‰“å°ä» 1 åˆ° 10 çš„æ•°å­—ï¼š

```Bash
#!/bin/bash

for num in {1..10}; do
    echo $num
done
```

å¦‚æœä½ è¿è¡Œå®ƒï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°åƒè¿™æ ·çš„è¾“å‡ºï¼š

```Bash
$ ./for-loop.sh
1
2
3
4
5
6
7
8
9
10
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `for num in 1 2 3 4 5 6 7 8 9 10; do` ï¼Œä½†æ˜¯ä½¿ç”¨æ‹¬å·æ‰©å±•ä½¿å¾—ä»£ç çœ‹èµ·æ¥æ›´çŸ­ä¸”æ›´æ™ºèƒ½ã€‚

`{..}` æ˜¯ç”¨äºæ‰©å±•æ¨¡å¼çš„ã€‚ä½ ä½¿ç”¨ `{d..h}` ï¼Œå®ƒç­‰åŒäº `d e f g h` ã€‚å…³äºæ‹¬å·æ‰©å±•çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥åœ¨è¿™ç¯‡æ–‡ç« ä¸­æ‰¾åˆ°ã€‚

> **[åœ¨ Bash ä¸­ä½¿ç”¨æ‹¬å·æ‰©å±•](https://linuxhandbook.com/brace-expansion/?ref=itsfoss.com)**

> ğŸ’¡ å¦‚æœä½ ç†Ÿæ‚‰ C è¯­è¨€ç¼–ç¨‹ï¼Œä½ å¯èƒ½ä¼šå–œæ¬¢åœ¨ bash ä¸­ä½¿ç”¨ C é£æ ¼çš„ for å¾ªç¯ï¼š
>
> ```Bash
> for ((i = 0 ; i < 10 ; i++)); do
>   echo $i
> done
> ```

è®©æˆ‘ä»¬çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼Œæ˜¾ç¤º [Bash æ•°ç»„](https://itsfoss.com/bash-arrays/) çš„æ‰€æœ‰å†…å®¹ï¼š

```Bash
#!/bin/bash

distros=(Ubuntu Fedora Debian Alpine)

for i in "${distros[@]}"; do
    echo $i
done
```

å¦‚æœä½ è¿è¡Œè„šæœ¬ï¼Œå®ƒå°†æ˜¾ç¤ºæ•°ç»„ä¸­å®šä¹‰çš„æ‰€æœ‰å‘è¡Œç‰ˆï¼š

```Bash
Ubuntu
Fedora
Debian
Alpine
```

## Bash ä¸­çš„ While å¾ªç¯

`while` å¾ªç¯æµ‹è¯•ä¸€ä¸ªæ¡ä»¶ï¼Œç„¶ååªè¦æ¡ä»¶ä¸ºçœŸï¼Œå°±ç»§ç»­å¾ªç¯ã€‚

```Bash
while [ condition ]; do
    commands
done
```

å¦‚æœä½ è€ƒè™‘å‰ä¸€ä¸ªä¾‹å­ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ `while` å¾ªç¯è¿›è¡Œé‡å†™ï¼š

```Bash
#!/bin/bash

num=1
while [ $num -le 10 ]; do
    echo $num
    num=$(($num+1))
done
```

å¦‚ä½ æ‰€è§ï¼Œä½ é¦–å…ˆéœ€è¦å°†å˜é‡ `num` å®šä¹‰ä¸º 1ï¼Œç„¶ååœ¨å¾ªç¯ä½“å†…ï¼Œä½ å¢åŠ  `num` çš„å€¼ã€‚åªè¦ `num` å°äºæˆ–ç­‰äº 10ï¼Œwhile å¾ªç¯å°±ä¼šæ£€æŸ¥æ¡ä»¶å¹¶è¿è¡Œè„šæœ¬ã€‚

å› æ­¤ï¼Œç°åœ¨è¿è¡Œè„šæœ¬å°†ä¼šæ˜¾ç¤ºå‡ºå’Œä¹‹å‰ `for` å¾ªç¯ä¸­çœ‹åˆ°çš„å®Œå…¨ç›¸åŒçš„ç»“æœã€‚

```Bash
1
2
3
4
5
6
7
8
9
10
```

è®©æˆ‘ä»¬çœ‹å¦ä¸€ä¸ªä¾‹å­ã€‚è¿™æ˜¯ä¸€ä¸ª [Bash è„šæœ¬ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•°å­—ä½œä¸ºå‚æ•°](https://itsfoss.com/bash-pass-arguments/) å¹¶æ˜¾ç¤ºè¯¥è¡¨ã€‚

```Bash
#!/bin/bash

echo "Table for $1 is:"
index=1
while [ $index -le 10 ]; do
    echo $(($1*$index))
    index=$(($index+1))
done
```

å¦‚æœä½ å¯¹ `$1` çš„ä½¿ç”¨æ„Ÿåˆ°å›°æƒ‘ï¼Œå®ƒä»£è¡¨ä¼ é€’ç»™è„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚æ›´å¤šçš„ç»†èŠ‚å¯ä»¥å‚è€ƒè¿™ä¸ªç³»åˆ—çš„ [ç¬¬ä¸‰ç« ](https://itsfoss.com/bash-pass-arguments/)ã€‚

å¦‚æœä½ è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå®ƒåº”è¯¥ä¼šæ˜¾ç¤ºä»¥ä¸‹çš„è¾“å‡ºï¼š

```Bash
$ ./table.sh 2
Table for 2 is:
2
4
6
8
10
12
14
16
18
20
```

## Bash ä¸­çš„ Until å¾ªç¯

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨è¾ƒå°‘çš„å¾ªç¯æ ¼å¼ã€‚å®ƒçš„è¡Œä¸ºå’Œ `while` å¾ªç¯ç±»ä¼¼ã€‚è¿™é‡Œçš„åŒºåˆ«æ˜¯ï¼Œå¾ªç¯è¿è¡Œç›´åˆ°å®ƒæ£€æŸ¥çš„æ¡ä»¶ä¸ºçœŸä¸ºæ­¢ã€‚æ„å‘³ç€ä¸ºäº†åœ¨å¾ªç¯ä¸­æ‰§è¡Œä»£ç ï¼Œ`[ ]` ä¸­çš„æ¡ä»¶å¿…é¡»ä¸ºå‡ã€‚

æˆ‘é©¬ä¸Šä¼šè§£é‡Šä¸€ä¸‹ã€‚è®©æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å®ƒçš„è¯­æ³•ã€‚

```Bash
until [ condition ]; do
    commands
done
```

ç°åœ¨ï¼Œå¦‚æœæˆ‘è¦ä½¿ç”¨ç›¸åŒçš„ç¤ºä¾‹ï¼Œå³ä½¿ç”¨ `until` å¾ªç¯æ‰“å°ä» 1 åˆ° 10 çš„æ•°å­—ï¼Œå®ƒçœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·ï¼š

```Bash
#!/bin/bash

num=1
until [ $num -gt 10 ]; do
    echo $num
    num=$(($num+1))
done
```

åŒºåˆ«åœ¨äºæ¡ä»¶ï¼›å…¶ä½™éƒ¨åˆ†ä¿æŒä¸å˜ã€‚

  * å½“å˜é‡ `num` å°äºæˆ–ç­‰äº 10 æ—¶ï¼Œwhile å¾ªç¯å°±ä¼šè¿è¡Œã€‚`[ ]` ä¸­çš„æ¡ä»¶å¿…é¡»ä¸ºçœŸï¼Œå¾ªç¯æ‰ä¼šæ‰§è¡Œã€‚
  * çŸ¥é“å˜é‡ `num` å˜å¾—å¤§äº 10 æ—¶ï¼Œuntil å¾ªç¯æ‰ä¼šè¿è¡Œã€‚`[ ]` ä¸­çš„æ¡ä»¶å¿…é¡»ä¸ºå‡ï¼Œå¾ªç¯æ‰ä¼šæ‰§è¡Œã€‚

è¿™éƒ½æ˜¯åšåŒæ ·äº‹æƒ…çš„ä¸¤ç§ä¸åŒæ–¹å¼ã€‚`while` æ›´å—æ¬¢è¿ï¼Œå› ä¸ºä½ ä¼šåœ¨å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­æ‰¾åˆ°ç±»ä¼¼ `while` çš„å¾ªç¯è¯­æ³•ã€‚

## ğŸ‹ï¸ ç»ƒä¹ æ—¶é—´

é‚£æ˜¯æœ‰è¶£çš„ã€‚ç°åœ¨æ˜¯åšä¸€äº›ç»ƒä¹ çš„æ—¶å€™äº†ã€‚

**ç»ƒä¹  1**ï¼šç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¯¥è„šæœ¬æ¥å—ä¸€ä¸ªæ•°å­—ä½œä¸ºå‚æ•°å¹¶æ‰“å°å…¶è¡¨æ ¼ã€‚å¦‚æœè„šæœ¬åœ¨æ²¡æœ‰å‚æ•°çš„æƒ…å†µä¸‹è¿è¡Œï¼Œä½ çš„è„šæœ¬è¿˜åº”æ˜¾ç¤ºä¸€ä¸ªæ¶ˆæ¯ã€‚

**é¢„æœŸè¾“å‡º**ï¼š

```Bash
$: ./table.sh
You forgot to enter a number

$: ./table.sh 3
3
6
9
12
15
18
21
24
27
30
```

**ç»ƒä¹  2** : ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œåˆ—å‡ºç›®å½• `/var` ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚

**æç¤º** : å¯¹äºå¾ªç¯ï¼Œä½¿ç”¨ `/var/*` ä½œä¸º â€œåˆ—è¡¨â€ã€‚

Bash åŸºç¡€çŸ¥è¯†ç³»åˆ—å³å°†ç»“æŸã€‚ä½œä¸ºè¯¥ç³»åˆ—çš„æœ€åä¸€ç« ï¼Œä½ å°†åœ¨ä¸‹å‘¨å­¦ä¹ åœ¨ Bash è„šæœ¬ä¸­ä½¿ç”¨å‡½æ•°ã€‚æ•¬è¯·æœŸå¾…ã€‚


--------------------------------------------------------------------------------

>via: https://itsfoss.com/bash-loops/
>
>ä½œè€…ï¼š[Abhishek Prakash](https://itsfoss.com/author/abhishek/)
>
>é€‰é¢˜ï¼š[lujun9972](https://github.com/lujun9972)
>
>è¯‘è€…ï¼šChatGPT
>
>æ ¡å¯¹ï¼š[wxy](https://github.com/wxy)
>
>æœ¬æ–‡ç”± [LCTT](https://github.com/LCTT/TranslateProject) åŸåˆ›ç¼–è¯‘ï¼Œ[Linuxä¸­å›½](https://linux.cn/) è£èª‰æ¨å‡º